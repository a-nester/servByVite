{"version":3,"file":"commonHelpers3.js","sources":["../src/js/page3.js"],"sourcesContent":["import \"../css/style.css\"\n\nconst BASE_URL = \"http://localhost:3000/todos\"\nconst form = document.querySelector('.todo__form');\nconst container = document.querySelector('.list');\n// const listDel = document.querySelector('.list__btn');\n\n\nform.addEventListener('submit', handleSubmit);\ncontainer.addEventListener(\"click\", handleUpdate);\ncontainer.addEventListener(\"click\", handleDelete);\n\n\nasync function fetchData(url, options = {}) {\n    const response = await fetch(url, options);\n    if (!response.ok) {\n        throw new Error(response.statusText);\n    }\n    return await response.json();\n}\n\nfetchData(BASE_URL)\n    .then(todos => container.insertAdjacentHTML(\"beforeend\", createMarkup(todos)))\n    .catch(err => console.log(err))\n\n\nfunction createMarkup(arr) {\n    return arr.map(({ id, title, completed }) => {\n        return `\n        <li data-id=\"${id}\" class=\"list__item\">\n            <input type=\"checkbox\" class=\"list__checkbox\" ${completed && \"cheked\"}>\n            <h2 class=\"list__title\">${title}</h2>\n            <button class=\"list__btn\">x<?button>\n        </li>\n        `}).join('')\n}\n    \nfunction handleSubmit(event) {\n    event.preventDefault();\n\n    const { todo } = event.currentTarget.elements;\n\n    fetchData(BASE_URL, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({ title: todo.value, completed: false})\n    })\n        .then(data => container.insertAdjacentHTML(\"beforeend\", createMarkup([data])))\n        .catch(err => console.log(err))\n        .finally(() => form.reset())\n    \n    // const formData = new FormData(event.target)\n    // const obj = {};\n    // for (const key of formData.keys()) {\n    //     console.log(\"value\", formData.get(key));\n    //     obj[key] = formData.get(key)\n    // }\n    // const object = Object.fromEntries(formData.entries())\n    // console.log(object);\n}\n\nfunction handleUpdate(event) {\n    if (!event.target.classList.contains(\"list__checkbox\")) {\n        return;\n    }\n    event.preventDefault();\n    const parent = event.target.closest(\".list__item\");\n    const id = parent.dataset.id;\n\n    fetchData(`${BASE_URL}/${id}`, {\n        method: \"PATCH\",\n        body: JSON.stringify({ completed: event.target.checked })\n    })\n        .then(data => event.target.checked = data.completed)\n        .catch(err => console.log(err))\n    \n}\n\nfunction handleDelete(event) {\n    if (!event.target.classList.contains(\"list__btn\")) {\n        return;\n    }\n    const parent = event.target.closest(\".list__item\");\n    const id = parent.dataset.id;\n\n    fetch(`${BASE_URL}/${id}`, {\n        method: \"DELETE\"\n    })\n        .then(data => parent.remove())\n        .catch(err => console.log(err))     \n}"],"names":["BASE_URL","form","container","handleSubmit","handleUpdate","handleDelete","fetchData","url","options","response","todos","createMarkup","err","arr","id","title","completed","event","todo","data","parent"],"mappings":"oDAEA,MAAMA,EAAW,8BACXC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAY,SAAS,cAAc,OAAO,EAIhDD,EAAK,iBAAiB,SAAUE,CAAY,EAC5CD,EAAU,iBAAiB,QAASE,CAAY,EAChDF,EAAU,iBAAiB,QAASG,CAAY,EAGhD,eAAeC,EAAUC,EAAKC,EAAU,GAAI,CACxC,MAAMC,EAAW,MAAM,MAAMF,EAAKC,CAAO,EACzC,GAAI,CAACC,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,UAAU,EAEvC,OAAO,MAAMA,EAAS,MAC1B,CAEAH,EAAUN,CAAQ,EACb,KAAKU,GAASR,EAAU,mBAAmB,YAAaS,EAAaD,CAAK,CAAC,CAAC,EAC5E,MAAME,GAAO,QAAQ,IAAIA,CAAG,CAAC,EAGlC,SAASD,EAAaE,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CAAE,GAAAC,EAAI,MAAAC,EAAO,UAAAC,KAClB;AAAA,uBACQF,CAAE;AAAA,4DACmCE,GAAa,QAAQ;AAAA,sCAC3CD,CAAK;AAAA;AAAA;AAAA,SAGjC,EAAE,KAAK,EAAE,CACnB,CAEA,SAASZ,EAAac,EAAO,CACzBA,EAAM,eAAc,EAEpB,KAAM,CAAE,KAAAC,CAAM,EAAGD,EAAM,cAAc,SAErCX,EAAUN,EAAU,CAChB,OAAQ,OACR,QAAS,CACL,eAAgB,kBACnB,EACD,KAAM,KAAK,UAAU,CAAE,MAAOkB,EAAK,MAAO,UAAW,EAAK,CAAC,CACnE,CAAK,EACI,KAAKC,GAAQjB,EAAU,mBAAmB,YAAaS,EAAa,CAACQ,CAAI,CAAC,CAAC,CAAC,EAC5E,MAAMP,GAAO,QAAQ,IAAIA,CAAG,CAAC,EAC7B,QAAQ,IAAMX,EAAK,OAAO,CAUnC,CAEA,SAASG,EAAaa,EAAO,CACzB,GAAI,CAACA,EAAM,OAAO,UAAU,SAAS,gBAAgB,EACjD,OAEJA,EAAM,eAAc,EAEpB,MAAMH,EADSG,EAAM,OAAO,QAAQ,aAAa,EAC/B,QAAQ,GAE1BX,EAAU,GAAGN,CAAQ,IAAIc,CAAE,GAAI,CAC3B,OAAQ,QACR,KAAM,KAAK,UAAU,CAAE,UAAWG,EAAM,OAAO,QAAS,CAChE,CAAK,EACI,KAAKE,GAAQF,EAAM,OAAO,QAAUE,EAAK,SAAS,EAClD,MAAMP,GAAO,QAAQ,IAAIA,CAAG,CAAC,CAEtC,CAEA,SAASP,EAAaY,EAAO,CACzB,GAAI,CAACA,EAAM,OAAO,UAAU,SAAS,WAAW,EAC5C,OAEJ,MAAMG,EAASH,EAAM,OAAO,QAAQ,aAAa,EAC3CH,EAAKM,EAAO,QAAQ,GAE1B,MAAM,GAAGpB,CAAQ,IAAIc,CAAE,GAAI,CACvB,OAAQ,QAChB,CAAK,EACI,KAAKK,GAAQC,EAAO,QAAQ,EAC5B,MAAMR,GAAO,QAAQ,IAAIA,CAAG,CAAC,CACtC"}