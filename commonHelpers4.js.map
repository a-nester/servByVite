{"version":3,"file":"commonHelpers4.js","sources":["../src/js/page4.js"],"sourcesContent":["// axios(BASE_URL, {\n//     params: {\n//         limit: 2,\n//         page: 5\n//     },\n//     headers: {\n//         api_key\n//     }\n// })\n//     .then(response => console.log(response.data))\n//     .catch(err => console.log(err.message))\n\n// axios.post(BASE_URL, {\n//     title: \"Buy a bread\",\n//     completed: false\n// })\n//     .then(({ data }) => console.log(data))\n// .catch(err => console.log(err))\n\n\n// axios({\n//     url: BASE_URL,\n//     method: \"POST\",\n//     headers: {\n//         \"Content-Type\": \"aplication/json\"\n//     },\n//     data: {\n//         title: \"Buy chocolate\",\n//         completed: false\n//     }\n// })\n//     .then(({ data }) => console.log(data))\n//     .catch(err => console.log(err))\n\n// axios({\n//     url: `${BASE_URL}/1010`,\n//     method: \"PATCH\",\n//     data: {\n//         completed: true\n//     }\n// })\n//     .then(({ data }) => console.log(data))\n//     .catch(err => console.log(err))\n// .finally(() => console.log('Ok'))\n\n// axios.delete(`${BASE_URL}/68c6`)\n//     .then(response = console.log(response))\n//     .catch(err => console.log(err.message))\n\n// async function foo() {\n//     try {\n//         const { data } = await axios(BASE_URL);\n//         container.insertAdjacentHTML(\"beforeend\", JSON.stringify(data))\n//         console.log(data);\n//     } catch (error) {\n//         alert(error.message)\n//     }\n//     console.log('ok');\n// }\n\n// async function foo() {\n//     const response = await axios(BASE_URL);\n//     return response.data;\n// }\n\n// foo()\n//     .then(data => container.insertAdjacentHTML(\"beforeend\", JSON.stringify(data)))\n// .catch(err => alert(err.message))\n\n// async function foo() {\n//     const response = await axios(BASE_URL);\n//     return response;\n// }\n\n// async function render() {\n//     try {\n//         const data = await foo();\n//         container.insertAdjacentHTML(\"beforeend\", JSON.stringify(data));\n//     } catch (error) {\n//         alert(error);\n//     }\n// }\n// render()\nimport axios from \"axios\";\nimport \"../css/style.css\"\n\nconst BASE_URL = \"http://localhost:3000/todos\";\nconst form = document.querySelector(\".todo__form\");\nconst container = document.querySelector(\".list\");\n\n\nform.addEventListener('submit', handleSubmit);\ncontainer.addEventListener('click', handleDelete);\ncontainer.addEventListener('click', handleUpdate);\n\nrender();\n\nasync function serviceTodos(options = {}) {\n    const { data } = await axios(options);\n    return data;\n}\n\nfunction createMarkup(arr) {\n    return arr.map(({ id, title, completed }) => `\n    <li data-id=\"${id}\" class=\"list__item\">\n            <input type=\"checkbox\" class=\"list__checkbox\" ${completed && \"checked\"}>\n            <h2 class=\"list__title\">${title}</h2>\n            <button class=\"list__btn\">x<?button>\n        </li>\n    `\n    )\n    .join('')\n}\n\nasync function render() {\n    try {\n        const todos = await serviceTodos({ url: BASE_URL });\n        container.insertAdjacentHTML(\"beforeend\", createMarkup(todos))\n    } catch (error) {\n        alert(error.message)\n    }\n}\n    \nasync function handleSubmit(event) {\n    event.preventDefault();\n    const { toDo } = event.target.elements;\n    try {\n        const data = await serviceTodos({\n            method: \"POST\",\n            url: BASE_URL,\n            data: {\n                title: toDo.value,\n                completed: false\n            }\n        });\n        container.insertAdjacentHTML(\"beforeend\", createMarkup([data]) )\n    } catch (err) {\n        alert(err.message)\n    } finally {\n        form.reset();\n    }\n}\n\nasync function handleUpdate(event) {\n    const delBtn = event.target;\n    if (!delBtn.classList.contains('list__checkbox')) {\n        return;\n    }\n    event.preventDefault();\n    const parentId = delBtn.closest('.list__item').dataset.id;\n\n    try {\n        const toDo = await serviceTodos({\n            method: \"PATCH\",\n            url: `${BASE_URL}/${parentId}`,\n            data: {\n                    completed: event.target.checked\n                }\n        });\n        console.log(toDo);\n        event.target.checked = toDo.completed;\n    } catch (err) {\n        alert(err.message);\n    }\n}\n\nasync function handleDelete(event) {\n    const delBtn = event.target;\n    if (!delBtn.classList.contains('list__btn')) {\n        return;\n    }\n    const parent = delBtn.closest('.list__item');\n    const id = parent.dataset.id;\n    try {\n        await serviceTodos({\n            method: \"DELETE\",\n            url: `${BASE_URL}/${id}`\n        });\n        parent.remove();\n    } catch (error) {\n        alert(error.message);\n    }\n}"],"names":["BASE_URL","form","container","handleSubmit","handleDelete","handleUpdate","render","serviceTodos","options","data","axios","createMarkup","arr","id","title","completed","todos","error","event","toDo","err","delBtn","parentId","parent"],"mappings":"uIAsFA,MAAMA,EAAW,8BACXC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAY,SAAS,cAAc,OAAO,EAGhDD,EAAK,iBAAiB,SAAUE,CAAY,EAC5CD,EAAU,iBAAiB,QAASE,CAAY,EAChDF,EAAU,iBAAiB,QAASG,CAAY,EAEhDC,IAEA,eAAeC,EAAaC,EAAU,GAAI,CACtC,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAMF,CAAO,EACpC,OAAOC,CACX,CAEA,SAASE,EAAaC,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CAAE,GAAAC,EAAI,MAAAC,EAAO,UAAAC,CAAS,IAAO;AAAA,mBAC9BF,CAAE;AAAA,4DACuCE,GAAa,SAAS;AAAA,sCAC5CD,CAAK;AAAA;AAAA;AAAA,KAItC,EACA,KAAK,EAAE,CACZ,CAEA,eAAeR,GAAS,CACpB,GAAI,CACA,MAAMU,EAAQ,MAAMT,EAAa,CAAE,IAAKP,CAAU,CAAA,EAClDE,EAAU,mBAAmB,YAAaS,EAAaK,CAAK,CAAC,CAChE,OAAQC,EAAO,CACZ,MAAMA,EAAM,OAAO,CACtB,CACL,CAEA,eAAed,EAAae,EAAO,CAC/BA,EAAM,eAAc,EACpB,KAAM,CAAE,KAAAC,CAAM,EAAGD,EAAM,OAAO,SAC9B,GAAI,CACA,MAAMT,EAAO,MAAMF,EAAa,CAC5B,OAAQ,OACR,IAAKP,EACL,KAAM,CACF,MAAOmB,EAAK,MACZ,UAAW,EACd,CACb,CAAS,EACDjB,EAAU,mBAAmB,YAAaS,EAAa,CAACF,CAAI,CAAC,CAAG,CACnE,OAAQW,EAAK,CACV,MAAMA,EAAI,OAAO,CACzB,QAAc,CACNnB,EAAK,MAAK,CACb,CACL,CAEA,eAAeI,EAAaa,EAAO,CAC/B,MAAMG,EAASH,EAAM,OACrB,GAAI,CAACG,EAAO,UAAU,SAAS,gBAAgB,EAC3C,OAEJH,EAAM,eAAc,EACpB,MAAMI,EAAWD,EAAO,QAAQ,aAAa,EAAE,QAAQ,GAEvD,GAAI,CACA,MAAMF,EAAO,MAAMZ,EAAa,CAC5B,OAAQ,QACR,IAAK,GAAGP,CAAQ,IAAIsB,CAAQ,GAC5B,KAAM,CACE,UAAWJ,EAAM,OAAO,OAC3B,CACjB,CAAS,EACD,QAAQ,IAAIC,CAAI,EAChBD,EAAM,OAAO,QAAUC,EAAK,SAC/B,OAAQC,EAAK,CACV,MAAMA,EAAI,OAAO,CACpB,CACL,CAEA,eAAehB,EAAac,EAAO,CAC/B,MAAMG,EAASH,EAAM,OACrB,GAAI,CAACG,EAAO,UAAU,SAAS,WAAW,EACtC,OAEJ,MAAME,EAASF,EAAO,QAAQ,aAAa,EACrCR,EAAKU,EAAO,QAAQ,GAC1B,GAAI,CACA,MAAMhB,EAAa,CACf,OAAQ,SACR,IAAK,GAAGP,CAAQ,IAAIa,CAAE,EAClC,CAAS,EACDU,EAAO,OAAM,CAChB,OAAQN,EAAO,CACZ,MAAMA,EAAM,OAAO,CACtB,CACL"}